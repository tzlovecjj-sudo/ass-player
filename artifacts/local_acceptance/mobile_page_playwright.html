<!DOCTYPE html><html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ASSå­—å¹•æ’­æ”¾å™¨ - ç§»åŠ¨ç«¯</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/mobile.css">
    <style>
        /* ç®€å•çš„ç§»åŠ¨ç«¯é€‚é…æ ·å¼ï¼Œä¼˜å…ˆè¦†ç›–æ¡Œé¢å¸ƒå±€ä¸­çš„å¸ƒå±€é—®é¢˜ */
        body { font-size: 16px; padding: 0; margin: 0; background: #111; color: #eee; }
        .mobile-container { display: flex; flex-direction: column; gap: 8px; padding: 12px; }
        .video-wrap { position: relative; width: 100%; background: #000; border-radius: 8px; overflow: hidden; }
        video { width: 100%; height: auto; display: block; background: #000; }
        .mobile-controls { display:flex; gap:8px; align-items:center; justify-content:space-between; margin-top:6px; }
        .mobile-inputs { display:flex; gap:8px; margin-top:8px; }
        input[type="text"]{ flex:1; padding:8px; border-radius:6px; border:1px solid #444; background:#222; color:#fff }
        button { padding:8px 10px; border-radius:6px; border:none; background:#2d8cff; color:#fff }
        .small { font-size: 13px; color:#bbb }
        .link-desktop { text-align:center; margin-top:8px }
        .link-desktop a { color:#2d8cff }
    </style>
</head>
<body>
    <div class="mobile-container">
        <div id="mobile-header">
            <div class="mobile-header-top">
                <h2 class="visually-hidden">ASSå­—å¹•æ’­æ”¾å™¨</h2>
            </div>

            <div class="video-wrap">
                <video id="videoPlayer" playsinline="" webkit-playsinline="" controls="" crossorigin="anonymous">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
                </video>
                <!-- ä¸ºä¿æŒä¸æ¡Œé¢æ’­æ”¾å™¨å…¼å®¹ï¼ŒåŠ å…¥ canvas ä¾›å­—å¹•æ¸²æŸ“ä½¿ç”¨ -->
                <canvas id="videoCanvas" width="1280" height="720" style="display:block; width:100%; height:auto; background:#000"></canvas>
            </div>

            <!-- ä½¿ç”¨ä¸æ¡Œé¢ä¸€è‡´çš„ controls ç»“æ„ï¼Œä¾¿äºæ’­æ”¾å™¨æ¨¡å—ç»Ÿä¸€åˆå§‹åŒ– -->
            <div class="controls" id="mobileControls">
                <div class="controls-left">
                    <button id="playPauseBtn" class="play-pause-btn" title="æ’­æ”¾/æš‚åœ">â–¶ï¸</button>
                    <button id="restartBtn" title="é‡æ–°å¼€å§‹">â†º</button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="currentProgressTime">0:00</span>
                        <span id="totalTime">0:00</span>
                    </div>
                </div>

                <div class="controls-right" style="position: relative;">
                    <button id="fontScaleIcon" title="å­—å¹•ç¼©æ”¾" type="button" style="width: 30px; height: 28px; padding: 2px; margin-right: 6px; border: none; background: transparent; color: rgb(223, 232, 248); cursor: pointer; font-size: 14px;">Aâ†•</button><button id="muteBtn" title="é™éŸ³/å–æ¶ˆé™éŸ³">ğŸ”‡</button>
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" style="width: 70px; vertical-align: middle;">
                    <button id="fullscreenBtn" title="ç½‘é¡µå…¨å±">â›¶</button>
                <div id="fontScalePopup" style="position: absolute; bottom: 36px; right: 49px; padding: 8px; background: rgba(10, 12, 16, 0.95); border: 1px solid rgba(255, 255, 255, 0.06); border-radius: 6px; display: none; z-index: 9999; min-width: 140px; box-shadow: rgba(0, 0, 0, 0.5) 0px 6px 18px;"><input type="range" min="0.5" max="2.0" step="0.05" style="width: 100%;"><div style="display: flex; align-items: center; gap: 8px;"><div style="color: rgb(159, 199, 255); font-size: 12px;">100%</div><button type="button" title="é‡ç½®ä¸º100%" style="border: none; background: transparent; color: rgb(223, 232, 248); cursor: pointer; font-size: 14px;">âŸ²</button></div></div></div>
            </div>

            <!-- éšè—ä½†å¿…è¦çš„å…ƒç´ ï¼ˆä¾›æ–‡ä»¶é€‰æ‹©/è„šæœ¬ç»‘å®šä½¿ç”¨ï¼‰ -->
            <input type="file" id="videoFile" style="display: none;" accept="video/*">
            <input type="file" id="subtitleFile" style="display: none;" accept=".ass,.ssa,.srt">

            <div class="subtitle-preview-container" id="mobileSubtitlePreview">
                <div class="subtitle-preview-content" id="subtitlePreview">æ— å­—å¹•</div>
            </div>
        </div>

        <div class="mobile-panel" id="mobilePanel">
            <div class="panel-row">
                <div class="label">è§†é¢‘æ ‡é¢˜</div>
                <div class="value" id="videoTitle">æœªåŠ è½½</div>
            </div>
            <div class="panel-row">
                <div class="label">åˆ†è¾¨ç‡</div>
                <div class="value" id="videoResolution">-</div>
            </div>
            <div class="panel-row">
                <div class="label">æ—¶é•¿</div>
                <div class="value" id="videoDuration">-</div>
            </div>
            <div class="panel-row">
                <div class="label">å­—å¹•æ–‡ä»¶</div>
                <div class="value" id="subtitleName">æœªåŠ è½½</div>
            </div>
            <div class="panel-row">
                <div class="label">å­—å¹•æ•°é‡</div>
                <div class="value" id="subtitleCount">-</div>
            </div>

            <div style="margin-top:10px;font-size:12px;color:#888">æç¤ºï¼šç§»åŠ¨ç«¯å·²ç²¾ç®€ç•Œé¢ï¼Œé€‰æ‹©è§†é¢‘/å­—å¹•ä¸ä¸‹è½½åŠŸèƒ½å·²éšè—ã€‚</div>

            <div class="small link-desktop" style="margin-top:12px">å¦‚æœä½ æ›´å–œæ¬¢æ¡Œé¢ç‰ˆï¼Œ<a href="/?desktop=1" onclick="try{localStorage.setItem('forceDesktop','1')}catch(e){}">ç‚¹æ­¤æ‰“å¼€æ¡Œé¢ç‰ˆ</a></div>
        </div>

        <div style="height:40px"></div>
    </div>

    <script>
        // æ³¨å…¥åç«¯å…¬å¼€çš„è¿è¡Œæ—¶é…ç½®åˆ°å‰ç«¯
        window.ASS_PLAYER_CONFIG = {"AUTO_PLAY_DEMO": true, "DEFAULT_ASS_NAME": "Finding the Tomb of the Minecraft Mafia.ass", "DEFAULT_VIDEO_URL": "https://www.bilibili.com/video/BV1AyCQB4EjC", "PREFERRED_SUBTITLE": "both", "REPORT_TIMEOUT_MS": 3000};
        // Canvas rendering options for mobile devices.
        // Player renderer should read `window.CANVAS_RENDER_OPTIONS` and adapt:
        // - downscale: render scale relative to displayed size (0.5 means render at 50% resolution)
        // - maxFps: maximum frames per second to render (use frame-skipping)
        // - useOffscreen: prefer OffscreenCanvas when available
        window.CANVAS_RENDER_OPTIONS = {
            downscale: 0.6,
            maxFps: 20,
            useOffscreen: true
        };
    </script>
    <script type="module" src="/static/js/modules/main.js"></script>
    <script>
        // å¦‚æœç”¨æˆ·ç‚¹å‡»äº†â€œæ‰“å¼€æ¡Œé¢ç‰ˆâ€å¹¶è®¾ç½®äº†æœ¬åœ°æ ‡è®°ï¼Œä¸‹æ¬¡ä¸å†è‡ªåŠ¨é‡å®šå‘åˆ°ç§»åŠ¨é¡µ
        // è¿™ä¸ªè„šæœ¬åœ¨ç§»åŠ¨é¡µé¢åŠ è½½æ—¶ä¹Ÿä¼šå¤„ç†æœ¬åœ°æ ‡è®°ï¼ˆé¿å…å¾ªç¯ï¼‰
        (function(){
            try{
                var force = localStorage.getItem('forceDesktop');
                if(force === '1'){
                    // æ¸…ç†æ ‡è®°å¹¶è·³å›æ¡Œé¢é¡µé¢
                    localStorage.removeItem('forceDesktop');
                    window.location.href = '/';
                }
            }catch(e){}
        })();
    </script>

</body></html>